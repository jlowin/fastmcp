---
title: Remote Authorization
sidebarTitle: Remote Authorization
description: Integrate with external identity providers like WorkOS, Auth0, or Okta by trusting them to handle user authentication.
icon: users
---

import { VersionBadge } from "/snippets/version-badge.mdx"

<VersionBadge version="2.11.0" />

**Remote Authorization** is the most common pattern for securing user-facing applications. In this model, your FastMCP server acts as a **Resource Server (RS)** and integrates with an external, trusted **Authorization Server (AS)**, such as WorkOS, Auth0, or a corporate SSO system.

This approach lets you leverage robust, feature-rich identity platforms for user management, multi-factor authentication, and social logins, while your FastMCP server focuses on its core job: providing tools and resources.

### How It Works

The flow relies on the MCP client's ability to perform **Dynamic Client Registration (DCR)** with your FastMCP server.

1.  An MCP client (like Claude Desktop) connects to your server and asks for its OAuth configuration.
2.  Your FastMCP server, instead of providing its own login pages, provides the metadata of the trusted, external Authorization Server.
3.  The client is redirected to the external provider (e.g., a WorkOS login page) to handle user authentication and consent.
4.  After a successful login, the client receives a token *issued by the external provider*.
5.  The client then makes requests to your FastMCP server using that token.
6.  Your server uses its configured **Token Verifier** to validate the token's signature, issuer, and claims, granting access to its resources.

### `AuthKitProvider` (WorkOS Integration)

FastMCP provides a built-in provider for **WorkOS AuthKit** that makes this pattern incredibly simple to implement. It handles the metadata forwarding and token validation for you.

**Prerequisites:**
1. A WorkOS account with an AuthKit project.
2. **Dynamic Client Registration (DCR)** must be enabled in your WorkOS application settings.
3. Your FastMCP server's public URL must be added as a **Redirect URI** in your WorkOS project dashboard.

```python
from fastmcp import FastMCP
from fastmcp.server.auth.providers.workos import AuthKitProvider

# The AuthKitProvider handles both forwarding metadata to WorkOS
# and setting up a JWTVerifier to validate tokens issued by WorkOS.
auth_provider = AuthKitProvider(
    # Your unique AuthKit domain from the WorkOS dashboard
    authkit_domain="https://your-project.authkit.app",
    # The public-facing URL of THIS FastMCP server
    base_url="https://your-fastmcp-server.com"
)

mcp = FastMCP(name="My WorkOS-Protected Server", auth=auth_provider)

@mcp.tool
def get_sensitive_data() -> str:
    """This tool can only be accessed by users authenticated via WorkOS."""
    return "This is sensitive data."
```

When you use `AuthKitProvider`, it automatically configures a `JWTVerifier` internally using the JWKS endpoint provided by WorkOS (`{authkit_domain}/oauth2/jwks`), so you don't have to configure token validation separately.

For a complete, step-by-step tutorial, see the [**WorkOS AuthKit Integration Guide**](/servers/auth/integrations/workos-authkit).

### Building a Custom Provider for Other IdPs

You can connect to other identity providers that support DCR by creating a custom `AuthProvider`. The process involves two key steps:

1.  **Implement a Token Verifier:** Create a `TokenVerifier` that knows how to validate tokens from your chosen provider. For most providers, the standard `JWTVerifier` will work perfectly.
2.  **Customize Routes for Metadata Forwarding:** Implement the `customize_auth_routes` method to add a `/.well-known/oauth-authorization-server` endpoint that fetches and forwards the metadata from your upstream provider.

Here is a conceptual example for a fictional "CorpIdP" that uses JWTs:

```python
import httpx
from fastmcp import FastMCP
from fastmcp.server.auth.auth import AuthProvider
from fastmcp.server.auth.verifiers import JWTVerifier
from mcp.server.auth.provider import AccessToken
from starlette.responses import JSONResponse
from starlette.routing import BaseRoute, Route

class CorpAuthProvider(AuthProvider):
    def __init__(self):
        super().__init__()
        # 1. The verifier validates tokens from the upstream provider.
        self.token_verifier = JWTVerifier(
            jwks_uri="https://corpidp.com/.well-known/jwks.json",
            issuer="https://corpidp.com",
            audience="our-fastmcp-api"
        )

    async def verify_token(self, token: str) -> AccessToken | None:
        return await self.token_verifier.verify_token(token)
    
    def customize_auth_routes(self, routes: list[BaseRoute]) -> list[BaseRoute]:
        # 2. This endpoint tells MCP clients where to find the REAL auth server.
        async def discovery_endpoint(request):
            async with httpx.AsyncClient() as client:
                resp = await client.get("https://corpidp.com/.well-known/oauth-authorization-server")
                resp.raise_for_status()
                return JSONResponse(resp.json())

        routes.append(
            Route("/.well-known/oauth-authorization-server", discovery_endpoint)
        )
        return routes

# Now, use your custom provider with FastMCP
mcp = FastMCP(name="Corporate Server", auth=CorpAuthProvider())
```